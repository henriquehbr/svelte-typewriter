import{a as m,b as a,c as y}from"../chunk.KEGSSE5H.mjs";import"../chunk.E4LFTDIS.mjs";var l=async(r,e)=>{e.dispatch("done"),await a(typeof e.loop=="number"?e.loop:1500);let t=r.innerHTML.replaceAll("&amp;","&");for(let n=t.length-1;n>=0;n--)t[n]===">"&&(n=t.lastIndexOf("<",n)),r.innerHTML=t.slice(0,n),await a(e.interval)},i=[],s=r=>{for(;;){let e=m(0,r.length),t=typeof i=="number"&&e!==i;if(Array.isArray(i)&&!i.includes(e)||t)return t&&(i=[]),i.push(e),r[e];i.length===r.length&&(i=i.pop())}};async function f(r,e){for(let t=0;t<r.length;t++)await e(r[t],t,r)}var p=async({currentNode:r,text:e},t)=>{if(await y({currentNode:r,text:e},t),!t.stopLoop){let n=e.replaceAll("&","&amp;");r.innerHTML===n&&await l(r,t)}},c=async(r,e)=>{if(e.endLoop)f(r,async(t,n)=>{let o=e.endLoop?r.length-1===n:!1;await p(t,{...e,stopLoop:o})});else for(;;)if(e.loop)for(let t of r)await p(t,e);else if(e.loopRandom){let t=s(r);await p(t,e)}};export{c as mode};
