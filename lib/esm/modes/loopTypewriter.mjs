import{a as f,b as p,c as m}from"../chunk.KEGSSE5H.mjs";import"../chunk.E4LFTDIS.mjs";var a=async(r,e)=>{e.dispatch("done"),await p(typeof e.loop=="number"?e.loop:1500);let t=r.innerHTML.replaceAll("&amp;","&");for(let n=t.length-1;n>=0;n--)t[n]===">"&&(n=t.lastIndexOf("<",n)),r.innerHTML=t.slice(0,n),await p(e.interval)},i=[],s=r=>{for(;;){let e=f(0,r.length),t=typeof i=="number"&&e!==i;if(Array.isArray(i)&&!i.includes(e)||t)return t&&(i=[]),i.push(e),r[e];i.length===r.length&&(i=i.pop())}};async function c(r,e){for(let t=0;t<r.length;t++)await e(r[t],t,r)}var l=async({currentNode:r,text:e},t)=>{if(await m({currentNode:r,text:e},t),!t.stopLoop){let n=e.replaceAll("&","&amp;");r.innerHTML===n&&await a(r,t)}},y=async(r,e)=>{if(e.loopOnce)c(r,async(t,n)=>{let o=e.loopOnce?r.length-1===n:!1;await l(t,{...e,stopLoop:o})});else for(;;)if(e.loop)for(let t of r)await l(t,e);else if(e.loopRandom){let t=s(r);await l(t,e)}};export{y as mode};
